<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register | FLUX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: { obsidian: '#050505', surface: '#121212', cyan: '#22d3ee', violet: '#7c3aed' },
                    animation: { 'float': 'float 6s ease-in-out infinite' },
                    keyframes: { float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } } }
                }
            }
        }
    </script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .input-dark { background: #0a0a0a; border: 1px solid #222; transition: all 0.3s; color: white; }
        .input-dark:focus { border-color: #22d3ee; outline: none; box-shadow: 0 0 15px rgba(34, 211, 238, 0.1); }
        #toast-container { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 50; }
        .toast { background: rgba(20,20,20,0.9); backdrop-filter: blur(10px); padding: 10px 20px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 10px; color: white; margin-bottom: 10px; animation: slideDown 0.3s forwards; }
        @keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-obsidian text-white h-screen flex flex-col items-center justify-center relative overflow-hidden">

    <div id="toast-container"></div>

    <div class="absolute top-[-20%] right-[-10%] w-[500px] h-[500px] bg-cyan/20 rounded-full blur-[100px] animate-float"></div>
    <div class="absolute bottom-[-20%] left-[-10%] w-[500px] h-[500px] bg-rose-500/20 rounded-full blur-[100px] animate-float" style="animation-delay: 2s"></div>

    <div class="z-10 w-full max-w-md p-6">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-black italic tracking-tighter">JOIN FLUX</h1>
            <p class="text-gray-500 text-sm mt-2">Create an account to claim $1,000 Bonus.</p>
        </div>

        <form id="regForm" class="glass p-8 rounded-3xl shadow-2xl space-y-4">
            <div>
                <label class="text-[10px] uppercase font-bold text-gray-500 ml-1">Username</label>
                <input type="text" id="username" class="w-full input-dark rounded-xl p-3 mt-1" placeholder="CryptoKing" required>
            </div>

            <div>
                <label class="text-[10px] uppercase font-bold text-gray-500 ml-1">Email Address</label>
                <input type="email" id="email" class="w-full input-dark rounded-xl p-3 mt-1" placeholder="user@flux.com" required>
            </div>
            
            <div>
                <label class="text-[10px] uppercase font-bold text-gray-500 ml-1">Password</label>
                <input type="password" id="password" class="w-full input-dark rounded-xl p-3 mt-1" placeholder="••••••••" required>
            </div>
            
            <div>
                <label class="text-[10px] uppercase font-bold text-gray-500 ml-1">Confirm Password</label>
                <input type="password" id="confirmPass" class="w-full input-dark rounded-xl p-3 mt-1" placeholder="••••••••" required>
            </div>

            <button type="submit" class="w-full py-4 bg-white text-black font-black italic text-lg rounded-xl shadow-[0_0_20px_rgba(255,255,255,0.3)] hover:scale-[1.02] transition mt-2">
                CREATE ACCOUNT
            </button>
        </form>

        <p class="text-center mt-6 text-sm text-gray-400">
            Already have an account? <a href="index.html" class="text-cyan font-bold hover:underline">Log In</a>
        </p>
    </div>

    <script>
        lucide.createIcons();

        function showToast(msg, type='error') {
            const container = document.getElementById('toast-container');
            const el = document.createElement('div');
            el.className = 'toast';
            el.innerHTML = `<i data-lucide="${type==='error'?'alert-circle':'check-circle'}" class="w-4 h-4 ${type==='error'?'text-red-500':'text-cyan'}"></i> ${msg}`;
            container.appendChild(el);
            lucide.createIcons();
            setTimeout(() => el.remove(), 3000);
        }

        document.getElementById('regForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value.toLowerCase();
            const password = document.getElementById('password').value;
            const confirmPass = document.getElementById('confirmPass').value;

            if (password !== confirmPass) {
                return showToast('Passwords do not match');
            }

            // 1. Get Existing DB or create new one
            const usersDB = JSON.parse(localStorage.getItem('fluxUsers')) || {};

            // 2. Check if user exists
            if (usersDB[email]) {
                return showToast('Email already registered');
            }

            // 3. Create User in Dictionary
            usersDB[email] = {
                username: username,
                email: email,
                password: password,
                balance: 1000.00, // Starter Bonus
                joined: new Date().toLocaleDateString()
            };

            // 4. Save and Redirect
            localStorage.setItem('fluxUsers', JSON.stringify(usersDB));
            showToast('Account Created! Redirecting...', 'success');
            
            setTimeout(() => window.location.href = 'index.html', 1500);
        });
    </script>
</body>
</html>